<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Custom styles -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <header class="bg-success text-white py-2 px-3">
        <div class="container-fluid">

            <!-- Desktop -->
            <div class="d-none d-lg-flex align-items-center justify-content-between">
                <!-- Лого -->
                <div class="d-flex align-items-center">
                    <img src="/static/assets/logo.svg" alt="Route.Invest" height="44">
                </div>

                <!-- Цитата -->
                <div class="text-center flex-grow-1 fw-semibold">
                    Интеллектуальный маршрут — умная инвестиция во время
                </div>

                <!-- Ссылки -->
                <nav class="d-flex align-items-center gap-4">
                    <button id="loginBtn" class="btn btn-outline-light btn-sm">Войти</button>
                    <button id="registerBtn" class="btn btn-light btn-sm">Регистрация</button>
                    <div id="userInfo" class="d-none">
                        <span id="userName" class="text-white me-3"></span>
                        <button id="logoutBtn" class="btn btn-outline-light btn-sm">Выйти</button>
                    </div>
                </nav>
            </div>

            <!-- Mobile -->
            <div class="d-flex d-lg-none align-items-center justify-content-between">
                <!-- Лого -->
                <img src="/static/assets/logo.svg" alt="Route.Invest" height="36">

                <!-- Ссылки -->
                <nav class="d-flex align-items-center gap-3">
                    <a href="#" class="text-white text-decoration-none small">Команда</a>
                    <a href="#" class="text-white text-decoration-none small">Помощь</a>
                </nav>
            </div>

        </div>
    </header>

    <main class="container-fluid flex-grow-1 py-4">
        <div class="row">
            <!-- Левая панель -->
            <div class="col-lg-3 col-md-4 bg-light p-3">
                <div class="bg-body-secondary rounded p-3 shadow-sm">
                    <form class="d-flex flex-column gap-3 mb-4">
                        <h5 class="fw-semibold fs-5 mb-2 text-dark">Прикрепите датасет</h5>

                        <!-- Предупреждение о необходимости авторизации -->
                        <div id="authWarning" class="alert alert-warning d-none mb-3">
                            <small>⚠️ Для загрузки файлов необходимо зарегистрироваться</small>
                        </div>

                        <!-- Блок загрузки файла -->
                        <div id="filePlaceholder"
                            class="position-relative text-center border border-success border-2 rounded bg-white p-5">
                            <input type="file" id="fileInput"
                                class="position-absolute top-0 start-0 w-100 h-100 opacity-0"
                                accept=".csv,.xlsx,.xls,.json" />
                            <svg width="22" height="19" viewBox="0 0 22 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <mask id="path-1-inside-1_6_183" fill="white">
                                    <path d="M0 11.5882H22V19H0V11.5882Z" />
                                </mask>
                                <path
                                    d="M22 19V21H24V19H22ZM0 19H-2V21H0V19ZM22 11.5882H20V19H22H24V11.5882H22ZM22 19V17H0V19V21H22V19ZM0 19H2V11.5882H0H-2V19H0Z"
                                    fill="#348C57" mask="url(#path-1-inside-1_6_183)" />
                                <path
                                    d="M11.7071 0.292899C11.3166 -0.0976254 10.6834 -0.0976253 10.2929 0.292899L3.92893 6.65686C3.53841 7.04738 3.53841 7.68055 3.92893 8.07107C4.31946 8.4616 4.95262 8.4616 5.34315 8.07107L11 2.41422L16.6569 8.07107C17.0474 8.4616 17.6805 8.4616 18.0711 8.07107C18.4616 7.68055 18.4616 7.04738 18.0711 6.65686L11.7071 0.292899ZM11 12.6471L12 12.6471L12 1.00001L11 1.00001L10 1.00001L10 12.6471L11 12.6471Z"
                                    fill="#348C57" />
                            </svg>

                            <p class="mt-2 mb-0 small text-secondary">
                                Перетащите файл сюда<br />или выберите на устройстве
                            </p>
                        </div>

                        <!-- Отображение прикреплённого файла -->
                        <div id="fileInfo"
                            class="d-none align-items-center justify-content-between border border-success border-2 rounded bg-white p-2">
                            <p id="fileName" class="mb-0 text-dark fw-medium small"></p>
                            <button type="button" id="removeFileBtn" class="btn btn-sm text-white px-3"
                                style="background-color: #ff6b6b">
                                Удалить
                            </button>
                        </div>


                        <!-- Выбор периода -->
                        <div class="d-flex gap-2">
                            <select id="periodSelect" class="form-select border-success text-success flex-grow-1">
                                <option selected>Выбрать период</option>
                                <option value="1_day">1 день</option>
                                <option value="2_day">2 дня</option>
                                <option value="3_day">3 дня</option>
                                <option value="4_day">4 дня</option>
                                <option value="5_day">5 дней</option>
                                <option value="6_day">6 дней</option>
                                <option value="7_day">7 дней</option>
                            </select>
                        </div>

                        <!-- Геолокация -->
                        <div>
                            <button id="getGeo" type="button" class="btn btn-success w-100 rounded-3 mb-2">
                                Разрешить геолокацию
                            </button>
                            <p id="geoError" class="text-danger small d-none">
                                Упс... Что-то пошло не так! Попробуйте ввести вручную.
                            </p>
                            <input type="text" id="manualAddress" class="form-control border-success rounded-3"
                                placeholder="Введите свой адрес" disabled/>
                        </div>

                        <!-- Кнопка построить маршрут -->
                        <button type="submit" class="btn btn-success w-100 rounded-3">
                            Построить маршрут
                        </button>
                    </form>

                    <!-- Таблица -->
                    <div class="table-block">
                        <div class="d-flex gap-4 mb-3">
                            <select class="form-select border-success text-success">
                                <option selected>Выбрать день</option>
                                <option value="1">1 день</option>
                                <option value="2">2 день</option>
                            </select>
                            <button id="getExportFile" type="button" class="btn text-white rounded-3"
                                style="background-color: #a9733b">
                                Экспортировать
                            </button>
                        </div>

                        <table class="table table-sm table-hover align-middle text-center">
                            <thead class="table-success">
                                <tr>
                                    <th>Адрес</th>
                                    <th>VIP</th>
                                    <th>ETA</th>
                                    <th>Статус</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>г. Ростов-на-Дону, ул. Большая Садовая, д. 1</td>
                                    <td>Да</td>
                                    <td>8:15</td>
                                    <td>
                                        <input type="checkbox" name="isVisits" checked class="form-check-input" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>г. Ростов-на-Дону, ул. Большая Садовая, д. 1</td>
                                    <td>Да</td>
                                    <td>8:15</td>
                                    <td>
                                        <input type="checkbox" name="isVisits" checked class="form-check-input" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Правая часть (карта) -->
            <div class="col-lg-9 col-md-8 p-0">
                <div id="map" class="w-100 h-100" style="min-height: 80vh"></div>
            </div>
        </div>
    </main>


    <footer class="bg-success text-white py-2 px-3 mt-auto d-none d-lg-block">
        <div class="container-fluid d-flex align-items-center justify-content-between">
            <!-- Лого -->
            <div class="d-flex align-items-center">
                <img src="/static/assets/logo.svg" alt="Route.Invest" height="32">
            </div>

            <!-- Центр -->
            <div class="text-center flex-grow-1 small">
                © Хакатон 2025
            </div>

            <!-- Пустое место (чтобы выровнять центр) -->
            <div style="width:32px;"></div>
        </div>
    </footer>


    <!-- Модальные окна -->
    <!-- Модальное окно входа -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Вход в систему</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginPhone" class="form-label">Номер телефона</label>
                            <input type="tel" class="form-control" id="loginPhone" placeholder="+79001234567" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Пароль</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-success w-100">Войти</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно регистрации -->
    <div class="modal fade" id="registerModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Регистрация</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="regFirstName" class="form-label">Имя</label>
                            <input type="text" class="form-control" id="regFirstName" required>
                        </div>
                        <div class="mb-3">
                            <label for="regLastName" class="form-label">Фамилия</label>
                            <input type="text" class="form-control" id="regLastName" required>
                        </div>
                        <div class="mb-3">
                            <label for="regPhone" class="form-label">Номер телефона</label>
                            <input type="tel" class="form-control" id="regPhone" placeholder="+79001234567" required>
                        </div>
                        <div class="mb-3">
                            <label for="regPassword" class="form-label">Пароль</label>
                            <input type="password" class="form-control" id="regPassword" required>
                        </div>
                        <button type="submit" class="btn btn-success w-100">Зарегистрироваться</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно настроек периода пребывания -->
    <div class="modal fade" id="stayPeriodModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Настройка периода пребывания</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="stayPeriodForm">
                        <div class="mb-3">
                            <label for="stayDays" class="form-label">Количество дней пребывания</label>
                            <select class="form-select" id="stayDays" required>
                                <option value="1">1 день</option>
                                <option value="2">2 дня</option>
                                <option value="3">3 дня</option>
                                <option value="4">4 дня</option>
                                <option value="5">5 дней</option>
                                <option value="6">6 дней</option>
                                <option value="7">7 дней</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-success w-100">Установить период</button>
                    </form>
                    <div id="stayPeriodInfo" class="mt-3 d-none">
                        <div class="alert alert-info">
                            <h6>Текущий период:</h6>
                            <p id="currentPeriodInfo"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>

</body>

</html>