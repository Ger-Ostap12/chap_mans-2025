# üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

## üóÇÔ∏è –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö

### **DATA (2).txt** - –ö–ª–∏–µ–Ω—Ç—ã –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É
```
–§–æ—Ä–º–∞—Ç: JSON-like —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 47 –∫–ª–∏–µ–Ω—Ç–æ–≤
–°–æ–¥–µ—Ä–∂–∏—Ç: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∞–¥—Ä–µ—Å–∞, —Å—Ç–∞—Ç—É—Å—ã VIP/–°—Ç–∞–Ω–¥–∞—Ä—Ç
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```
{
  "id": 1,
  "address": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, —É–ª. –ë–æ–ª—å—à–∞—è –°–∞–¥–æ–≤–∞—è, 1",
  "lat": 47.2225,
  "lon": 39.7203,
  "client_level": "VIP",
  "work_start": "09:00",
  "work_end": "18:00",
  "lunch_start": "13:00",
  "lunch_end": "14:00"
}
```

## üß† –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### **Client** - –ú–æ–¥–µ–ª—å –∫–ª–∏–µ–Ω—Ç–∞
```python
@dataclass
class Client:
    id: int                    # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–ª–∏–µ–Ω—Ç–∞
    address: str              # –ê–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
    lat: float                # –®–∏—Ä–æ—Ç–∞
    lon: float                # –î–æ–ª–≥–æ—Ç–∞
    client_level: ClientLevel # VIP –∏–ª–∏ –°—Ç–∞–Ω–¥–∞—Ä—Ç
    work_start: str           # –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (HH:MM)
    work_end: str             # –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (HH:MM)
    lunch_start: str          # –ù–∞—á–∞–ª–æ –æ–±–µ–¥–∞ (HH:MM)
    lunch_end: str            # –ö–æ–Ω–µ—Ü –æ–±–µ–¥–∞ (HH:MM)
```

### **ClientLevel** - –£—Ä–æ–≤–µ–Ω—å –∫–ª–∏–µ–Ω—Ç–∞
```python
class ClientLevel(Enum):
    VIP = "VIP"           # VIP –∫–ª–∏–µ–Ω—Ç (30 –º–∏–Ω –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)
    REGULAR = "–°—Ç–∞–Ω–¥–∞—Ä—Ç"  # –û–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (20 –º–∏–Ω –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)
```

### **Location** - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
```python
@dataclass
class Location:
    latitude: float    # –®–∏—Ä–æ—Ç–∞
    longitude: float   # –î–æ–ª–≥–æ—Ç–∞
    address: str       # –ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å
    city: str          # –ì–æ—Ä–æ–¥
    country: str       # –°—Ç—Ä–∞–Ω–∞
    accuracy: float    # –¢–æ—á–Ω–æ—Å—Ç—å –≤ –º–µ—Ç—Ä–∞—Ö
    source: str        # –ò—Å—Ç–æ—á–Ω–∏–∫: GPS/IP/Manual
```

## üì° API –§–æ—Ä–º–∞—Ç—ã

### **–ó–∞–ø—Ä–æ—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤**
```json
{
  "clients_data": [
    {
      "id": 1,
      "address": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, —É–ª. –ë–æ–ª—å—à–∞—è –°–∞–¥–æ–≤–∞—è, 1",
      "lat": 47.2225,
      "lon": 39.7203,
      "client_level": "VIP",
      "work_start": "09:00",
      "work_end": "18:00",
      "lunch_start": "13:00",
      "lunch_end": "14:00"
    }
  ],
  "num_days": 3
}
```

### **–û—Ç–≤–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤**
```json
{
  "success": true,
  "num_days": 3,
  "total_clients": 47,
  "user_location": {
    "latitude": 47.2225,
    "longitude": 39.7203,
    "address": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, –†–æ—Å—Å–∏—è",
    "source": "GPS"
  },
  "routes": [
    {
      "day": 1,
      "clients": [
        {
          "id": 0,
          "address": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
          "lat": 47.2225,
          "lon": 39.7203,
          "client_level": "–°—Ç–∞–Ω–¥–∞—Ä—Ç",
          "arrival_time": "09:00",
          "service_time": 0,
          "departure_time": "09:00"
        },
        {
          "id": 1,
          "address": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, —É–ª. –ë–æ–ª—å—à–∞—è –°–∞–¥–æ–≤–∞—è, 1",
          "lat": 47.2225,
          "lon": 39.7203,
          "client_level": "VIP",
          "arrival_time": "09:15",
          "service_time": 30,
          "departure_time": "09:45"
        }
      ],
      "total_time": "6 —á–∞—Å–æ–≤ 45 –º–∏–Ω—É—Ç",
      "total_distance": "45.2 –∫–º",
      "tomtom_route": {
        "summary": {
          "lengthInMeters": 4520,
          "travelTimeInSeconds": 900,
          "trafficDelayInSeconds": 120
        }
      }
    }
  ]
}
```

## üß† ANN –ú–æ–¥–µ–ª—å - –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### **–ü—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è**
```python
features = [
    'latitude',           # –®–∏—Ä–æ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞
    'longitude',          # –î–æ–ª–≥–æ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞
    'is_vip',            # VIP —Å—Ç–∞—Ç—É—Å (0/1)
    'work_start_hour',   # –ß–∞—Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (0-23)
    'work_end_hour',     # –ß–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (0-23)
    'lunch_start_hour',  # –ß–∞—Å –Ω–∞—á–∞–ª–∞ –æ–±–µ–¥–∞ (0-23)
    'lunch_end_hour',    # –ß–∞—Å –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ–±–µ–¥–∞ (0-23)
    'current_hour'       # –¢–µ–∫—É—â–∏–π —á–∞—Å (0-23)
]
```

### **–¶–µ–ª–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
```python
targets = [
    'trip_time',         # –í—Ä–µ–º—è –ø–æ–µ–∑–¥–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö
    'priority_score',    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (0-1)
    'route_score'        # –û—Ü–µ–Ω–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ (0-1)
]
```

## üìä –î–∞–Ω–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è

### **NYC Taxi Data**
```
–§–∞–π–ª: taxi_trip_data.csv
–ó–∞–ø–∏—Å–µ–π: 10,000+
–°—Ç–æ–ª–±—Ü—ã: pickup_lat, pickup_lon, dropoff_lat, dropoff_lon, trip_time
```

### **–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**
```
–§–∞–π–ª: combined_training_data.csv
–ó–∞–ø–∏—Å–µ–π: 41,000+
–°–æ–¥–µ—Ä–∂–∏—Ç: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã + –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ + VIP —Å—Ç–∞—Ç—É—Å—ã
```

### **TomTom API –¥–∞–Ω–Ω—ã–µ**
```
–ó–∞–ø–∏—Å–µ–π: 2,162 –ø–∞—Ä—ã
–ò—Å—Ç–æ—á–Ω–∏–∫: –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ TomTom API
–°–æ–¥–µ—Ä–∂–∏—Ç: —Ç–æ—á–Ω—ã–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### **1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤**
```
DATA (2).txt ‚Üí load_clients_from_file() ‚Üí List[Client]
```

### **2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è**
```
GPS/IP/–ê–¥—Ä–µ—Å ‚Üí LocationDetector ‚Üí Location
```

### **3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤**
```
List[Client] ‚Üí ANN Model ‚Üí TomTom API ‚Üí Route
```

### **4. –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**
```
Route ‚Üí export_routes_to_json() ‚Üí frontend_routes.json
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏**
```python
metrics = {
    'mse': 0.08,           # –°—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞
    'mae': 0.15,           # –°—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
    'r2_score': 0.92,      # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏–∏
    'training_time': '2h', # –í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è
    'epochs': 50           # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö
}
```

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤**
```python
client_stats = {
    'total_clients': 47,
    'vip_clients': 3,      # 6.4%
    'regular_clients': 44, # 93.6%
    'avg_service_time': 21.3, # –º–∏–Ω—É—Ç—ã
    'coverage_area': '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É'
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
```python
time_config = {
    'work_start': '09:00',    # –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
    'work_end': '18:00',      # –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
    'lunch_start': '13:00',   # –ù–∞—á–∞–ª–æ –æ–±–µ–¥–∞
    'lunch_end': '14:00',     # –ö–æ–Ω–µ—Ü –æ–±–µ–¥–∞
    'vip_service_time': 30,   # –í—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è VIP (–º–∏–Ω)
    'regular_service_time': 20 # –í—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –æ–±—ã—á–Ω—ã—Ö (–º–∏–Ω)
}
```

### **API –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
```python
api_config = {
    'tomtom_api_key': 'required',
    'max_retries': 3,
    'timeout': 10,
    'rate_limit': 2500,  # –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
    'ssl_verify': False  # –¥–ª—è —Ä–µ—à–µ–Ω–∏—è SSL –ø—Ä–æ–±–ª–µ–º
}
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤**
```
[–í–†–ï–ú–Ø] [–£–†–û–í–ï–ù–¨] [–ú–û–î–£–õ–¨] –°–û–û–ë–©–ï–ù–ò–ï

–ü—Ä–∏–º–µ—Ä—ã:
2024-01-15 10:30:15 INFO unified_route_system ‚úÖ –ú–∞—Ä—à—Ä—É—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω: 3 –¥–Ω—è
2024-01-15 10:30:16 INFO location_detector üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É
2024-01-15 10:30:17 INFO api_endpoint üöó API –∑–∞–ø—Ä–æ—Å: /optimize_routes_from_location
```

### **–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
- `INFO` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `WARNING` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –û—à–∏–±–∫–∏
- `DEBUG` - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
